set(PROJECT_SOURCE_TEMPLATE_DIR "${CMAKE_CURRENT_LIST_DIR}/templates")

include("${CMAKE_CURRENT_LIST_DIR}/server_frame/server_frame.cmake")

set(GENERATE_FOR_PB_PROTO_PATH
  "${PROJECT_SERVER_FRAME_BAS_DIR}/protocol/config"
  "${PROJECT_SERVER_FRAME_BAS_DIR}/protocol/pbdesc"
  "${PROJECT_THIRD_PARTY_INSTALL_DIR}/include"
  "${ATFRAMEWORK_LIBATBUS_REPO_DIR}/include"
  "${ATFRAMEWORK_LIBATAPP_REPO_DIR}/include"
)
if (PROJECT_THIRD_PARTY_XRESLOADER_PROTO_DIR AND EXISTS "${PROJECT_THIRD_PARTY_XRESLOADER_PROTO_DIR}")
  list(APPEND GENERATE_FOR_PB_PROTO_PATH "${PROJECT_THIRD_PARTY_XRESLOADER_PROTO_DIR}")
endif()
if (PROJECT_THIRD_PARTY_XRESCODE_GENERATOR_REPO_DIR AND EXISTS "${PROJECT_THIRD_PARTY_XRESCODE_GENERATOR_REPO_DIR}/pb_extension")
  list(APPEND GENERATE_FOR_PB_PROTO_PATH "${PROJECT_THIRD_PARTY_XRESCODE_GENERATOR_REPO_DIR}/pb_extension")
endif()

include("${CMAKE_CURRENT_LIST_DIR}/generate-rpc-task.cmake")

add_subdirectory(echosvr)

add_subdirectory(server_frame)
add_subdirectory(loginsvr)
add_subdirectory(gamesvr)

add_subdirectory(tools)
